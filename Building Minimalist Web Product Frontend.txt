Here are the complete, production-ready files for the Ci Moment frontend, strictly adhering to your design system and constraints.
1. app/layout.tsx


TypeScript




import type { Metadata, Viewport } from "next";

export const metadata: Metadata = {
 title: "Ci Moment",
 description: "A personal moment signal.",
 openGraph: {
   title: "Ci Moment",
   description: "A personal moment signal.",
   type: "website",
 },
};

export const viewport: Viewport = {
 width: "device-width",
 initialScale: 1,
 maximumScale: 1,
 userScalable: false, // Prevents zooming to maintain app-like feel
};

export default function RootLayout({
 children,
}: {
 children: React.ReactNode;
}) {
 return (
   <html lang="en">
     <body
       style={{
         backgroundColor: "#0a0a0a",
         color: "#d4d4d4",
         fontFamily:
           "'SF Mono', 'Fira Code', 'Cascadia Code', 'Consolas', monospace",
         margin: 0,
         padding: 0,
         height: "100vh",
         width: "100vw",
         overflow: "hidden",
         display: "flex",
         flexDirection: "column",
         alignItems: "center",
         justifyContent: "center",
         WebkitFontSmoothing: "antialiased",
         MozOsxFontSmoothing: "grayscale",
       }}
     >
       {children}
     </body>
   </html>
 );
}

2. app/page.tsx


TypeScript




"use client";

import { useState, useCallback } from "react";
// Assumed existence based on prompt instructions
import { getStatus } from "@/lib/engine";

import Landing from "@/components/Landing";
import Threshold from "@/components/Threshold";
import Manifest from "@/components/Manifest";
import Result from "@/components/Result";

export type ScreenState = "landing" | "threshold" | "manifest" | "result";
export type ContextType = "career" | "love" | "timing" | null;

interface ResultData {
 status: string;
 minute: string; // Using 'minute' as per engine output
 artifactCode: string;
 timestamp: string;
}

export default function Page() {
 const [screen, setScreen] = useState<ScreenState>("landing");
 const [context, setContext] = useState<ContextType>(null);
 const [result, setResult] = useState<ResultData | null>(null);

 const handleContextSelect = useCallback((selectedContext: ContextType) => {
   setContext(selectedContext);
   setScreen("threshold");
 }, []);

 const handleThresholdBack = useCallback(() => {
   setContext(null);
   setScreen("landing");
 }, []);

 const handleThresholdConfirm = useCallback(() => {
   setScreen("manifest");
 }, []);

 const handleManifestComplete = useCallback(() => {
   if (!context) return;

   // Simulate engine call logic
   const engineData = getStatus(context);
   
   setResult({
     status: engineData.status,
     minute: engineData.minute, // passing through for locking
     artifactCode: engineData.artifactCode,
     timestamp: new Date().toISOString(),
   });
   setScreen("result");
 }, [context]);

 return (
   <main
     style={{
       width: "100%",
       height: "100%",
       display: "flex",
       alignItems: "center",
       justifyContent: "center",
       position: "relative",
     }}
   >
     {screen === "landing" && <Landing onSelect={handleContextSelect} />}

     {screen === "threshold" && (
       <Threshold
         onConfirm={handleThresholdConfirm}
         onBack={handleThresholdBack}
       />
     )}

     {screen === "manifest" && (
       <Manifest onComplete={handleManifestComplete} />
     )}

     {screen === "result" && result && context && (
       <Result
         status={result.status}
         artifactCode={result.artifactCode}
         timestamp={result.timestamp}
         context={context}
         lockedMinute={result.minute}
       />
     )}
   </main>
 );
}

3. components/Landing.tsx


TypeScript




"use client";

import { useState } from "react";
import { ContextType } from "@/app/page";

interface LandingProps {
 onSelect: (ctx: ContextType) => void;
}

export default function Landing({ onSelect }: LandingProps) {
 return (
   <div
     style={{
       display: "flex",
       flexDirection: "column",
       alignItems: "center",
       justifyContent: "center",
       width: "100%",
       height: "100%",
       position: "relative",
     }}
   >
     {/* Top Brand */}
     <div
       style={{
         position: "absolute",
         top: "3rem",
         fontSize: "0.65rem",
         letterSpacing: "0.4em",
         color: "#555",
         textTransform: "uppercase",
       }}
     >
       Ci
     </div>

     {/* Main Headline */}
     <h1
       style={{
         fontSize: "clamp(1.4rem, 4vw, 2.2rem)",
         fontWeight: 300,
         color: "#d4d4d4",
         margin: "0 0 3rem 0",
         textAlign: "center",
       }}
     >
       Is now your Ci Moment?
     </h1>

     {/* Buttons Container */}
     <div
       style={{
         display: "flex",
         flexDirection: "column",
         gap: "1rem",
         width: "100%",
         maxWidth: "280px",
       }}
     >
       <LandingButton label="Career" onClick={() => onSelect("career")} />
       <LandingButton label="Love" onClick={() => onSelect("love")} />
       <LandingButton label="Timing" onClick={() => onSelect("timing")} />
     </div>

     {/* Footer Disclaimer */}
     <div
       style={{
         position: "absolute",
         bottom: "2rem",
         fontSize: "0.6rem",
         color: "#333",
         textAlign: "center",
         width: "100%",
       }}
     >
       Not advice. Not prediction. A personal moment signal.
     </div>
   </div>
 );
}

// Sub-component for Hover State management
function LandingButton({
 label,
 onClick,
}: {
 label: string;
 onClick: () => void;
}) {
 const [hover, setHover] = useState(false);

 return (
   <button
     onClick={onClick}
     onMouseEnter={() => setHover(true)}
     onMouseLeave={() => setHover(false)}
     style={{
       background: "transparent",
       border: `1px solid ${hover ? "#555" : "#2a2a2a"}`,
       color: hover ? "#e8e8e8" : "#b0b0b0",
       padding: "1rem 1.5rem",
       cursor: "pointer",
       textTransform: "capitalize",
       fontSize: "0.85rem",
       letterSpacing: "0.15em",
       fontFamily: "inherit",
       transition: "border-color 0.3s ease, color 0.3s ease",
       width: "100%",
       minHeight: "44px",
     }}
   >
     {label}
   </button>
 );
}

4. components/Threshold.tsx


TypeScript




"use client";

import { useEffect, useState } from "react";

interface ThresholdProps {
 onConfirm: () => void;
 onBack: () => void;
}

export default function Threshold({ onConfirm, onBack }: ThresholdProps) {
 const [opacity, setOpacity] = useState(0);

 useEffect(() => {
   // Trigger fade in on mount
   const timer = setTimeout(() => setOpacity(1), 50);
   return () => clearTimeout(timer);
 }, []);

 return (
   <div
     style={{
       opacity: opacity,
       transition: "opacity 0.8s ease",
       display: "flex",
       flexDirection: "column",
       alignItems: "center",
       justifyContent: "center",
       gap: "2rem",
     }}
   >
     <div
       style={{
         fontSize: "0.9rem",
         color: "#888",
         textAlign: "center",
         letterSpacing: "0.05em",
       }}
     >
       This moment will be locked.
     </div>

     <div style={{ display: "flex", gap: "1rem" }}>
       <ThresholdButton
         label="Confirm"
         primary={true}
         onClick={onConfirm}
       />
       <ThresholdButton
         label="Not now"
         primary={false}
         onClick={onBack}
       />
     </div>
   </div>
 );
}

function ThresholdButton({
 label,
 primary,
 onClick,
}: {
 label: string;
 primary: boolean;
 onClick: () => void;
}) {
 const [hover, setHover] = useState(false);

 const baseBorder = primary ? "#444" : "#1a1a1a";
 const hoverBorder = primary ? "#888" : "#333"; // Slight visibility for secondary on hover logic (implied)
 const baseColor = primary ? "#d4d4d4" : "#444";
 
 return (
   <button
     onClick={onClick}
     onMouseEnter={() => setHover(true)}
     onMouseLeave={() => setHover(false)}
     style={{
       background: "transparent",
       border: `1px solid ${hover ? hoverBorder : baseBorder}`,
       color: baseColor, // Keep color stable unless explicit hover color needed
       padding: "0.8rem 1.5rem",
       cursor: "pointer",
       fontSize: "0.85rem",
       letterSpacing: "0.1em",
       fontFamily: "inherit",
       transition: "border-color 0.3s ease",
       minHeight: "44px",
       minWidth: "100px",
     }}
   >
     {label}
   </button>
 );
}

5. components/Manifest.tsx


TypeScript




"use client";

import { useEffect, useState } from "react";

interface ManifestProps {
 onComplete: () => void;
}

export default function Manifest({ onComplete }: ManifestProps) {
 const [styles, setStyles] = useState({
   backgroundColor: "#222",
   boxShadow: "none",
   transform: "scale(1)",
 });

 useEffect(() => {
   // 800ms
   const t1 = setTimeout(() => {
     setStyles((s) => ({ ...s, backgroundColor: "#444" }));
   }, 800);

   // 1800ms
   const t2 = setTimeout(() => {
     setStyles((s) => ({
       ...s,
       backgroundColor: "#888",
       boxShadow: "0 0 20px rgba(255,255,255,0.1)",
     }));
   }, 1800);

   // 2800ms
   const t3 = setTimeout(() => {
     setStyles((s) => ({
       ...s,
       backgroundColor: "#d4d4d4",
       transform: "scale(2)",
     }));
   }, 2800);

   // 3200ms
   const t4 = setTimeout(() => {
     onComplete();
   }, 3200);

   return () => {
     clearTimeout(t1);
     clearTimeout(t2);
     clearTimeout(t3);
     clearTimeout(t4);
   };
 }, [onComplete]);

 return (
   <div
     style={{
       width: "4px",
       height: "4px",
       borderRadius: "50%",
       transition: "background-color 1s ease, box-shadow 1s ease, transform 0.4s ease",
       ...styles,
     }}
   />
 );
}

6. components/Result.tsx


TypeScript




"use client";

import { useEffect, useState } from "react";
import SealButton from "./SealButton";
import { ContextType } from "@/app/page";

interface ResultProps {
 status: string;
 artifactCode: string;
 timestamp: string;
 context: ContextType;
 lockedMinute: string;
}

export default function Result({
 status,
 artifactCode,
 timestamp,
 context,
 lockedMinute,
}: ResultProps) {
 const [opacity, setOpacity] = useState(0);
 const [showSeal, setShowSeal] = useState(false);

 useEffect(() => {
   // Fade in main result
   const t1 = setTimeout(() => setOpacity(1), 50);
   // Show seal button after 2s
   const t2 = setTimeout(() => setShowSeal(true), 2000);
   return () => {
     clearTimeout(t1);
     clearTimeout(t2);
   };
 }, []);

 // Determine status color
 const getStatusColor = (s: string) => {
   const up = s.toUpperCase();
   if (up === "PROCEED") return "#c8d8c0";
   if (up === "HOLD") return "#d8d0b8";
   if (up === "NOT NOW") return "#b8b8b8";
   return "#d4d4d4"; // Fallback
 };

 return (
   <div
     style={{
       opacity: opacity,
       transition: "opacity 1s ease",
       display: "flex",
       flexDirection: "column",
       alignItems: "center",
       justifyContent: "center",
       width: "100%",
       textAlign: "center",
     }}
   >
     {/* Label */}
     <div
       style={{
         fontSize: "0.6rem",
         color: "#333",
         letterSpacing: "0.3em",
         marginBottom: "1.5rem",
         textTransform: "uppercase",
       }}
     >
       YOUR CI MOMENT
     </div>

     {/* Status */}
     <div
       style={{
         fontSize: "clamp(1.6rem, 5vw, 2.8rem)",
         fontWeight: 200,
         letterSpacing: "0.2em",
         color: getStatusColor(status),
         marginBottom: "3rem",
         textTransform: "uppercase",
       }}
     >
       {status}
     </div>

     {/* Info Block */}
     <div
       style={{
         display: "flex",
         flexDirection: "column",
         gap: "0.5rem",
         fontSize: "0.65rem",
         color: "#444",
         marginBottom: "4rem",
       }}
     >
       <div>Artifact: {artifactCode}</div>
       <div>{timestamp}</div>
       <div style={{ textTransform: "capitalize" }}>{context}</div>
       <div style={{ color: "#333", marginTop: "0.5rem" }}>
         Locked to your moment.
       </div>
     </div>

     {/* Seal Button Container */}
     <div
       style={{
         height: "60px", // Reserve space
         display: "flex",
         justifyContent: "center",
         alignItems: "center",
         opacity: showSeal ? 1 : 0,
         transition: "opacity 0.8s ease",
       }}
     >
       {showSeal && (
         <SealButton
           artifactCode={artifactCode}
           context={context}
           status={status}
           lockedMinute={lockedMinute}
         />
       )}
     </div>
   </div>
 );
}

7. components/SealButton.tsx


TypeScript




"use client";

import { useState, useEffect } from "react";
import { useSearchParams } from "next/navigation";

interface SealButtonProps {
 artifactCode: string;
 context: string | null;
 status: string;
 lockedMinute: string;
}

export default function SealButton({
 artifactCode,
 context,
 status,
 lockedMinute,
}: SealButtonProps) {
 const [hover, setHover] = useState(false);
 const [loading, setLoading] = useState(false);
 const [error, setError] = useState(false);
 
 // Safe extraction of query params
 const searchParams = useSearchParams();
 const isSealed = searchParams.get("sealed") === "true";

 // If redirected back with success
 if (isSealed) {
   return (
     <div style={{ fontSize: "0.6rem", color: "#555", letterSpacing: "0.1em" }}>
       Your Ci Moment is recorded.
     </div>
   );
 }

 const handleSeal = async () => {
   setLoading(true);
   setError(false);

   try {
     const response = await fetch("/api/seal", {
       method: "POST",
       headers: { "Content-Type": "application/json" },
       body: JSON.stringify({
         artifactCode,
         context,
         status,
         lockedMinute,
       }),
     });

     if (!response.ok) throw new Error("Seal failed");

     const data = await response.json();
     if (data.checkoutUrl) {
       window.location.href = data.checkoutUrl;
     } else {
       throw new Error("No checkout URL");
     }
   } catch (err) {
     setLoading(false);
     setError(true);
   }
 };

 if (error) {
   return (
     <div style={{ fontSize: "0.6rem", color: "#333" }}>
       Something went wrong.
     </div>
   );
 }

 return (
   <div style={{ display: "flex", flexDirection: "column", alignItems: "center", gap: "0.5rem" }}>
     <button
       onClick={handleSeal}
       disabled={loading}
       onMouseEnter={() => setHover(true)}
       onMouseLeave={() => setHover(false)}
       style={{
         background: "transparent",
         border: `1px solid ${hover ? "#333" : "#1a1a1a"}`,
         color: hover ? "#555" : "#333",
         opacity: loading ? 0.3 : hover ? 1 : 0.6,
         padding: "0.6rem 1.2rem",
         cursor: loading ? "wait" : "pointer",
         fontSize: "0.6rem",
         fontFamily: "inherit",
         transition: "all 0.3s ease",
         minHeight: "44px",
       }}
     >
       {loading ? "Sealing..." : "Seal this moment · $5"}
     </button>
     
     {!loading && (
       <div style={{ fontSize: "0.55rem", color: "#1a1a1a" }}>
         Creates a permanent record.
       </div>
     )}
   </div>
 );
}